(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{436:function(a,s,e){"use strict";e.r(s);var t=e(36),r=Object(t.a)({},(function(){var a=this,s=a.$createElement,e=a._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[e("h1",{attrs:{align:"center"}},[a._v("\n    linux服务器java环境变量问题\n")]),a._v(" "),e("h2",{attrs:{id:"问题背景"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#问题背景"}},[a._v("#")]),a._v(" 问题背景")]),a._v(" "),e("p",[a._v('在一台服务器上编译java项目时，遇到了报错"程序包javafx.scene不存在"，查了一下原来服务器上安装的是Open JDK（没有jfxrt.jar这个包）。干脆直接换Oracle JDK吧。'),e("a",{attrs:{href:"https://mirrors.huaweicloud.com/java/jdk/8u202-b08/",target:"_blank",rel:"noopener noreferrer"}},[a._v("华为云 jdk 镜像"),e("OutboundLink")],1),a._v(" 从这里很容易下载解压好了。然后肯定要修改java环境变量为新的这个。")]),a._v(" "),e("p",[a._v("明明已经在 /etc/profile 中做了如下修改，并且已经 source /etc/profile 让它生效了：")]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("JAVA_HOME=/usr/lib/jvm/jdk1.8.0_202\nPATH=$PATH:$JAVA_HOME/bin\nCLASSPATH=.:$JAVA_HOME/lib\nexport JAVA_HOME CLASSPATH PATH\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br")])]),e("p",[a._v("但是"),e("code",[a._v("java -version")]),a._v("一看，好家伙还是Open JDK的版本。到底是什么问题呢？")]),a._v(" "),e("h2",{attrs:{id:"排查原因"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#排查原因"}},[a._v("#")]),a._v(" 排查原因")]),a._v(" "),e("p",[a._v("首先"),e("code",[a._v("which java")]),a._v("看一下当前java命令的路径，注意这里看到的可能只是一个软链接的路径，再用"),e("code",[a._v("ls -l")]),a._v("命令看一下到底链接到哪里了。")]),a._v(" "),e("p",[a._v("然后很容易看出来，当前执行的java命令链接到的还是原来的Open JDK的路径。")]),a._v(" "),e("p",[a._v("把原来的这些java相关的软链接都删掉，再次执行"),e("code",[a._v("which java")]),a._v("：")]),a._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("root@localhost jvm"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# which java")]),a._v("\n/usr/lib/jvm/jdk1.8.0_202/bin/java\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br")])]),e("p",[a._v("这下看起来就对了，"),e("code",[a._v("java -version")]),a._v("再确认一下果然已经换成了Oracle JDK的版本。")]),a._v(" "),e("h2",{attrs:{id:"总结"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[a._v("#")]),a._v(" 总结")]),a._v(" "),e("p",[a._v("因为系统的"),e("code",[a._v("$PATH")]),a._v("中已经配了很多路径，在执行某个命令时应该用的是最先匹配到的那个，所以才看起来明明环境变量生效了，执行的却不是想要的版本。")]),a._v(" "),e("p",[a._v("有了这次的经验，以后遇到类似问题应该很容易排查了😂")])])}),[],!1,null,null,null);s.default=r.exports}}]);