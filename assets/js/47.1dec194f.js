(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{464:function(a,t,s){"use strict";s.r(t);var n=s(36),e=Object(n.a)({},(function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{align:"center"}},[a._v("\n    重写/自定义命令\n")]),a._v(" "),s("h2",{attrs:{id:"背景"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#背景"}},[a._v("#")]),a._v(" 背景")]),a._v(" "),s("p",[a._v("内网服务器经常有很多同学登录，执行某些命令时可能会影响其它服务。所以希望给一些比较危险的命令添加提示或者二次确认。")]),a._v(" "),s("h2",{attrs:{id:"例-给crontab命令添加提示"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#例-给crontab命令添加提示"}},[a._v("#")]),a._v(" 例-给crontab命令添加提示")]),a._v(" "),s("blockquote",[s("p",[a._v("crontab命令用来 提交和管理周期性执行的任务，一不小心可能删掉原来的任务。")])]),a._v(" "),s("p",[a._v("在/etc/profile文件最后添加自定义方法：")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 自定义crontab命令")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function-name function"}},[a._v("custom_crontab")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" -e "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"'),s("span",{pre:!0,attrs:{class:"token entity",title:"\\033"}},[a._v("\\033")]),a._v("[31m Warning: 此命令会影响一些定时任务，请确认影响范围后再修改！ "),s("span",{pre:!0,attrs:{class:"token entity",title:"\\033"}},[a._v("\\033")]),a._v('[0m"')]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("local")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("arg")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("`")]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" $*"),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("`")])]),a._v("\n    /usr/bin/crontab "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${arg}")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("alias")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("crontab")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'custom_crontab'")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br")])]),s("p",[a._v("修改之后要执行"),s("code",[a._v("source /etc/profile")]),a._v("使其生效。")]),a._v(" "),s("p",[a._v("效果：使用crontab命令会先打印出提示信息，然后再执行原命令。")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://buxianshan.oss-cn-beijing.aliyuncs.com/Typora_images/image-20220719171421420.png",alt:"image-20220719171421420"}})]),a._v(" "),s("h2",{attrs:{id:"注意点"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#注意点"}},[a._v("#")]),a._v(" 注意点")]),a._v(" "),s("ul",[s("li",[a._v("echo打印设置颜色，可以参考："),s("a",{attrs:{href:"https://www.cnblogs.com/xuyaowen/p/linux-output-color.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("linux 终端输出有颜色字体"),s("OutboundLink")],1)]),a._v(" "),s("li",[a._v("$* 是指“以一个字符串显示所有传递的参数”，通过它再把所有参数传到原来的命令")]),a._v(" "),s("li",[a._v("/etc/profile 中 执行原命令不能再直接用命令名了，要写完整路径，否则死循环。可以使用"),s("code",[a._v("which crontab")]),a._v("查看原来crontab这个命令的完整路径。")]),a._v(" "),s("li",[s("code",[a._v("source /etc/profile")]),a._v("使修改生效")])])])}),[],!1,null,null,null);t.default=e.exports}}]);