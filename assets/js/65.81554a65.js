(window.webpackJsonp=window.webpackJsonp||[]).push([[65],{482:function(t,s,n){"use strict";n.r(s);var e=n(36),a=Object(e.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{align:"center"}},[t._v("with è¯­å¥")]),t._v(" "),n("p",[t._v("å‚è€ƒï¼š")]),t._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"https://docs.python.org/zh-cn/3.9/reference/compound_stmts.html#the-with-statement",target:"_blank",rel:"noopener noreferrer"}},[t._v("with è¯­å¥"),n("OutboundLink")],1)]),t._v(" "),n("li",[n("a",{attrs:{href:"https://docs.python.org/zh-cn/3.9/reference/datamodel.html#with-statement-context-managers",target:"_blank",rel:"noopener noreferrer"}},[t._v("with è¯­å¥ä¸Šä¸‹æ–‡ç®¡ç†å™¨"),n("OutboundLink")],1)])]),t._v(" "),n("h2",{attrs:{id:"ä»€ä¹ˆæ˜¯withè¯­å¥"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ä»€ä¹ˆæ˜¯withè¯­å¥"}},[t._v("#")]),t._v(" ä»€ä¹ˆæ˜¯withè¯­å¥")]),t._v(" "),n("p",[t._v("å®˜æ–¹æ–‡æ¡£çš„æè¿°ï¼š")]),t._v(" "),n("blockquote",[n("p",[n("a",{attrs:{href:"https://docs.python.org/zh-cn/3.9/reference/compound_stmts.html#with",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("with")]),n("OutboundLink")],1),t._v(" è¯­å¥ç”¨äºåŒ…è£…å¸¦æœ‰ä½¿ç”¨ä¸Šä¸‹æ–‡ç®¡ç†å™¨ (å‚è§ "),n("a",{attrs:{href:"https://docs.python.org/zh-cn/3.9/reference/datamodel.html#context-managers",target:"_blank",rel:"noopener noreferrer"}},[t._v("with è¯­å¥ä¸Šä¸‹æ–‡ç®¡ç†å™¨"),n("OutboundLink")],1),t._v(" ä¸€èŠ‚) å®šä¹‰çš„æ–¹æ³•çš„ä»£ç å—çš„æ‰§è¡Œã€‚ è¿™å…è®¸å¯¹æ™®é€šçš„ "),n("a",{attrs:{href:"https://docs.python.org/zh-cn/3.9/reference/compound_stmts.html#try",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("try")]),n("OutboundLink")],1),t._v("..."),n("a",{attrs:{href:"https://docs.python.org/zh-cn/3.9/reference/compound_stmts.html#except",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("except")]),n("OutboundLink")],1),t._v("..."),n("a",{attrs:{href:"https://docs.python.org/zh-cn/3.9/reference/compound_stmts.html#finally",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("finally")]),n("OutboundLink")],1),t._v(" ä½¿ç”¨æ¨¡å¼è¿›è¡Œå°è£…ä»¥æ–¹ä¾¿åœ°é‡ç”¨ã€‚")]),t._v(" "),n("p",[t._v("ä¸Šä¸‹æ–‡ç®¡ç†å™¨å¤„ç†è¿›å…¥å’Œé€€å‡ºæ‰€éœ€è¿è¡Œæ—¶ä¸Šä¸‹æ–‡ä»¥æ‰§è¡Œä»£ç å—ã€‚")])]),t._v(" "),n("p",[t._v("ç®€å•ç†è§£ï¼šè¿›å…¥å’Œé€€å‡ºæŸä¸ªä»£ç å—æ—¶æ‰§è¡Œä¸€äº›æ“ä½œã€‚æœ€å¸¸ç”¨çš„åœºæ™¯å°±æ˜¯å¤„ç†å¼‚å¸¸å…œåº•ï¼Œå…¶å®å°±æ˜¯å¯¹"),n("code",[t._v("try...except...finally")]),t._v("çš„å°è£…ã€‚")]),t._v(" "),n("p",[t._v("ä¾‹å¦‚æ–‡ä»¶æµçš„æ“ä½œ"),n("code",[t._v('f = open("demo.txt")')]),t._v("ï¼Œæˆ‘ä»¬è¦è€ƒè™‘å¼‚å¸¸æƒ…å†µï¼Œä¿è¯æœ€åè¦å…³é—­æ–‡ä»¶æµ"),n("code",[t._v("f.close()")]),t._v("ã€‚è€Œä½¿ç”¨äº†withè¯­å¥"),n("code",[t._v('with open("demo.txt") as f')]),t._v("ï¼Œä»£ç å—ç»“æŸï¼ˆæˆ–å¼‚å¸¸ï¼‰åä¼šè‡ªåŠ¨åŒ–å…³é—­æ–‡ä»¶æµã€‚")]),t._v(" "),n("h2",{attrs:{id:"è‡ªå®šä¹‰ä¸Šä¸‹æ–‡ç®¡ç†å™¨"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#è‡ªå®šä¹‰ä¸Šä¸‹æ–‡ç®¡ç†å™¨"}},[t._v("#")]),t._v(" è‡ªå®šä¹‰ä¸Šä¸‹æ–‡ç®¡ç†å™¨")]),t._v(" "),n("p",[t._v("ä¸Šä¸‹æ–‡ç®¡ç†å™¨å°±æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œwithè¯­å¥å…¶å®å°±æ˜¯æ‰§è¡Œå¯¹è±¡çš„ä¸¤ä¸ªæ–¹æ³•ï¼š")]),t._v(" "),n("ul",[n("li",[n("code",[t._v("__enter__()")]),t._v("æ–¹æ³•ï¼šè¿›å…¥ä¸Šä¸‹æ–‡æ—¶æ‰§è¡Œï¼ˆå¦‚æœè¿™ä¸€æ­¥æ²¡æœ‰å¼‚å¸¸ï¼Œåˆ™ä¸ç®¡åé¢æ˜¯å¦æœ‰å¼‚å¸¸ï¼Œwithè¯­å¥ä¿è¯ä¼šæ‰§è¡Œ"),n("code",[t._v("__exit__()")]),t._v("æ–¹æ³•ï¼‰")]),t._v(" "),n("li",[n("code",[t._v("__exit__()")]),t._v("æ–¹æ³•ï¼šé€€å‡ºå…³è”åˆ°æ­¤å¯¹è±¡çš„ä¸Šä¸‹æ–‡æ—¶æ‰§è¡Œã€‚")])]),t._v(" "),n("p",[t._v("æ‰€ä»¥å¾ˆå¥½ç†è§£"),n("code",[t._v('with open("demo.txt") as f')]),t._v("ä¸ºä»€ä¹ˆä¸éœ€è¦æ‰‹åŠ¨"),n("code",[t._v("f.close()")]),t._v("äº†å§ï¼Œå…¶å®å°±æ˜¯"),n("code",[t._v("self.close()")]),t._v("å·²ç»å†™åˆ°"),n("code",[t._v("__exit__()")]),t._v("é‡Œäº†ã€‚")]),t._v(" "),n("p",[t._v("ä¸‹é¢æ˜¯ä¸€ä¸ªè‡ªå®šä¹‰ä¸Šä¸‹æ–‡ç®¡ç†å™¨çš„ä¾‹å­ï¼š")]),t._v(" "),n("div",{staticClass:"language-python line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-python"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MyContextManager")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("__enter__")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("self"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"è¿›å…¥ä¸Šä¸‹æ–‡..."')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ä¸€èˆ¬è¿”å›å…¶è‡ªèº«ï¼Œä»¥å…è®¸åœ¨withä»£ç å—ä¸­ä½¿ç”¨")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" self\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("__exit__")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("self"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("exc_info"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# exc_infoï¼šå¦‚æœä¸Šä¸‹æ–‡ä¸­æœ‰å¼‚å¸¸ï¼Œä¼šæœ‰å‚æ•°ä¼ è¿›æ¥")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("del")]),t._v(" exc_info\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"é€€å‡ºä¸Šä¸‹æ–‡..."')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("hi")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("self"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"I\'m a context manager"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" __name__ "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'__main__'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("with")]),t._v(" MyContextManager"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" m"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        m"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("hi"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ä»£ç å—..."')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# éªŒè¯å³ä½¿è¿™é‡Œæœ‰å¼‚å¸¸ä¹Ÿä¼šæ‰§è¡Œ__exit__æ–¹æ³•")]),t._v("\n        a "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"withè¯­å¥å¤–éƒ¨"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br"),n("span",{staticClass:"line-number"},[t._v("19")]),n("br"),n("span",{staticClass:"line-number"},[t._v("20")]),n("br"),n("span",{staticClass:"line-number"},[t._v("21")]),n("br"),n("span",{staticClass:"line-number"},[t._v("22")]),n("br"),n("span",{staticClass:"line-number"},[t._v("23")]),n("br"),n("span",{staticClass:"line-number"},[t._v("24")]),n("br")])]),n("p",[t._v("è¾“å‡ºï¼š")]),t._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('Traceback (most recent call last):\n  File "demo.py", line 22, in <module>\n    a = 1/0\nZeroDivisionError: division by zero\nè¿›å…¥ä¸Šä¸‹æ–‡...\nI\'m a context manager\nä»£ç å—...\né€€å‡ºä¸Šä¸‹æ–‡...\n')])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br")])]),n("p",[t._v("æ€»ç»“ï¼š")]),t._v(" "),n("ul",[n("li",[t._v("åªè¦çœ‹åˆ°ç±»ä¸­æœ‰"),n("code",[t._v("__enter__()")]),t._v("å’Œ"),n("code",[t._v("__exit__()")]),t._v("æ–¹æ³•ï¼Œå°±èƒ½ä½¿ç”¨withè¯­å¥")]),t._v(" "),n("li",[t._v("ä¸ç®¡ä»£ç å—ä¸­æ˜¯å¦æœ‰å¼‚å¸¸ï¼Œwithè¯­å¥éƒ½ä¿è¯ä¼šæ‰§è¡Œ"),n("code",[t._v("__exit__()")]),t._v("æ–¹æ³•ã€‚ä½†æ˜¯å¹¶ä¸ä»£è¡¨æˆ‘ä»¬ä¸éœ€è¦å¤„ç†å¼‚å¸¸äº†ï¼Œå¦‚æœæœ‰å¼‚å¸¸ï¼Œç¨‹åºä¹Ÿä¼šä¸­æ–­ã€‚")]),t._v(" "),n("li",[t._v("è™½ç„¶withè¯­å¥å¹¶ä¸èƒ½çœŸæ­£å¤„ç†å¼‚å¸¸ï¼Œä½†æ˜¯å¯¹äºæ–‡ä»¶æµã€æ•°æ®åº“è¿æ¥ã€ç±»ä¼¼è¿™äº›åœºæ™¯ï¼Œ"),n("code",[t._v("__exit__()")]),t._v("æ–¹æ³•é‡Œå¸®æˆ‘ä»¬æ‰§è¡Œäº†"),n("code",[t._v("close()")]),t._v("ç¡®å®æ–¹ä¾¿äº†ä¸å°‘ï¼ˆé¿å…è‡ªå·±å¿˜äº†å…³ğŸ˜‚ï¼‰ã€‚")])]),t._v(" "),n("p",[t._v("é¡ºä¾¿è®°å½•ä¸€ä¸‹å…³é”®å­—"),n("code",[t._v("as")]),t._v("çš„ç”¨æ³•ï¼Œç›®å‰åªé‡åˆ°ä¸¤ç§ä½¿ç”¨åœºæ™¯ï¼š")]),t._v(" "),n("ul",[n("li",[t._v("å¯¼å…¥æ¨¡å—æ—¶å¯ä»¥ç”¨asèµ·ä¸ªåˆ«å")]),t._v(" "),n("li",[t._v("withè¯­å¥ä¹Ÿå¯ä»¥ä½¿ç”¨asç»™ä¸Šä¸‹æ–‡ç®¡ç†å™¨èµ·ä¸ªåˆ«å")])])])}),[],!1,null,null,null);s.default=a.exports}}]);