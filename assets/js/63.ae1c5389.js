(window.webpackJsonp=window.webpackJsonp||[]).push([[63],{479:function(s,t,a){"use strict";a.r(t);var e=a(36),n=Object(e.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{align:"center"}},[s._v("Git")]),s._v(" "),a("h2",{attrs:{id:"git-commit-代码提交规范"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#git-commit-代码提交规范"}},[s._v("#")]),s._v(" git commit 代码提交规范")]),s._v(" "),a("p",[s._v("提交代码或创建pull request时，建议使用规范的格式描述改动信息。")]),s._v(" "),a("p",[s._v("事实上并没有统一的标准要求必须怎么做，规范提交格式可以便于对提交历史进行追溯，使代码改动的历史更加清晰。")]),s._v(" "),a("p",[s._v("推荐格式如下（注意英文冒号后有一个空格）：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("<type>: <subject>\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("code",[s._v("type")]),s._v("是改动类别，例如以下这些：")]),s._v(" "),a("ul",[a("li",[s._v("feature: 新功能（或者feat）")]),s._v(" "),a("li",[s._v("fix: 修复bug")]),s._v(" "),a("li",[s._v("docs: 文档改动")]),s._v(" "),a("li",[s._v("style: 格式（不影响代码运行的变动）")]),s._v(" "),a("li",[s._v("refactor: 重构（即不是新增功能，也不是修改bug的代码变动）")]),s._v(" "),a("li",[s._v("test: 增加测试")]),s._v(" "),a("li",[s._v("merge: 代码合并")]),s._v(" "),a("li",[s._v("revert: 回滚到某次提交")]),s._v(" "),a("li",[s._v("build: 用于更新构建配置、开发工具等")]),s._v(" "),a("li",[s._v("chore: 杂项，其它与功能无关的更改")])]),s._v(" "),a("p",[a("code",[s._v("subject")]),s._v("就是commit的简短描述，建议不超过50个字符。")]),s._v(" "),a("p",[s._v("个人感觉"),a("code",[s._v("subject")]),s._v("使用中文还是英文要看情况。例如都是公司的同事，那建议还是中文方便大家看。如果是GitHub上的开源仓库，维护者大多是国外的，那就使用英文更方便交流。")]),s._v(" "),a("p",[s._v("样例：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("fix: 用户查询缺少username属性\ndocs: 补充***的文档\nfeature: 新增***功能\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h2",{attrs:{id:"克隆-github-上的项目报错"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#克隆-github-上的项目报错"}},[s._v("#")]),s._v(" 克隆 GitHub 上的项目报错")]),s._v(" "),a("p",[s._v("大概率是网络问题，即使本地开启了科学上网的代理，没有配置好的话也会报错。")]),s._v(" "),a("p",[s._v("遇到过以下报错：")]),s._v(" "),a("ul",[a("li",[s._v("OpenSSL SSL_connect: Connection was reset in connection to github.com:443")]),s._v(" "),a("li",[s._v("Proxy CONNECT aborted")])]),s._v(" "),a("p",[a("strong",[s._v("解决方法：")])]),s._v(" "),a("p",[s._v("查看本地科学上网代理的端口，例如：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("HTTP "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:10809\nSOCKS5 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:10808\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("给git设置全局代理：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" config --global http.proxy "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:10809\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" config --global https.proxy "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:10808\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("此时应该已经可以正常使用"),a("code",[s._v("git clone")]),s._v("了。")]),s._v(" "),a("p",[a("strong",[s._v("还原git代理设置：")])]),s._v(" "),a("p",[s._v("如果需想要还原设置，只需要使用下面的命令：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" config --global --unset http.proxy\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" config --global --unset https.proxy\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("上面是设置全局代码，如果只想在当前仓库设置，使用下面的命令：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看当前仓库的配置")]),s._v("\n "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" config --local -l\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 给当前仓库设置代理")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" config --local http.proxy "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:10809\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" config --local https.proxy "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:10808\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 取消代理设置")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" config --local --unset http.proxy\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" config --local --unset https.proxy\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("p",[s._v("如果使用了git的GUI工具，例如Sourcetree，修改了代理还是遇到报错，可以尝试重启Sourcetree😂。")]),s._v(" "),a("h2",{attrs:{id:"丢弃本地修改-强制拉取最新"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#丢弃本地修改-强制拉取最新"}},[s._v("#")]),s._v(" 丢弃本地修改，强制拉取最新")]),s._v(" "),a("p",[s._v("丢弃本地修改，强制拉取远程仓库最新代码。")]),s._v(" "),a("p",[s._v("如果本地只修改了文件，但没有commit，可以使用下面这个命令：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" checkout "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("如果本地仓库也有提交（没有推送到远程仓库），使用下面的命令：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 获取远程仓库代码（不是合并）")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" fetch --all\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 把HEAD强制指向某分支，例如master分支")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" reset --hard origin/master\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("h2",{attrs:{id:"删除所有未跟踪的文件和目录"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#删除所有未跟踪的文件和目录"}},[s._v("#")]),s._v(" 删除所有未跟踪的文件和目录")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除工作区中所有未跟踪的文件和目录（不会删除已add的文件）")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" clean -f -d\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h2",{attrs:{id:"代码仓库太大-git-clone-拉不下来"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#代码仓库太大-git-clone-拉不下来"}},[s._v("#")]),s._v(" 代码仓库太大，git clone 拉不下来")]),s._v(" "),a("p",[s._v("代码仓库太大（例如超过2GB），git clone 时容易中断或者报错。")]),s._v(" "),a("p",[s._v("代码仓库大可能有两个原因：")]),s._v(" "),a("ul",[a("li",[s._v("存储的文件本身就大，例如存储了jar包、静态资源等文件")]),s._v(" "),a("li",[s._v("代码仓库分支多，提交历史记录多")])]),s._v(" "),a("p",[s._v("经过多次实践，记录一下自己体验较好的方式。")]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("注意")]),s._v(" "),a("p",[s._v("强烈建议先使用SSH克隆试试，如果还是不行再尝试下面的方法。")])]),s._v(" "),a("p",[a("strong",[s._v("第一步：只克隆代码仓库中某一个分支，并且是浅克隆（例如只获取最近一次的提交记录）")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" clone --depth "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" -b 分支名 代码仓库链接\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("strong",[s._v("第二步：修改仓库配置")])]),s._v(" "),a("p",[s._v("修改.git/config 文件中的配置.")]),s._v(" "),a("p",[s._v("因为克隆的时候指定了一个具体分支，"),a("code",[s._v("git fetch")]),s._v("也只会获取一个分支的内容。")]),s._v(" "),a("p",[s._v("修改前：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('[remote "origin"]\n\turl = 代码仓库链接\n\tfetch = +refs/heads/分支名:refs/remotes/origin/分支名\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("修改后（就是把分支名改成了"),a("code",[s._v("*")]),s._v("）：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('[remote "origin"]\n\turl = 代码仓库链接\n\tfetch = +refs/heads/*:refs/remotes/origin/*\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[a("strong",[s._v("第三步：获取所有分支代码")])]),s._v(" "),a("p",[s._v("执行"),a("code",[s._v("git fetch")]),s._v("，等待拉取结束即可。")]),s._v(" "),a("p",[s._v("（因为仓库较大，等待时间还是可能长一点，但已经比直接完整克隆要稳定很多了。）")]),s._v(" "),a("h2",{attrs:{id:"使用git时选择ssh协议还是http协议"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用git时选择ssh协议还是http协议"}},[s._v("#")]),s._v(" 使用Git时选择SSH协议还是HTTP协议")]),s._v(" "),a("p",[s._v("个人总结：只有克隆开源仓库且不提交修改时使用HTTP协议比较方便，其余场景全部推荐使用SSH协议。")]),s._v(" "),a("p",[s._v("参考：")]),s._v(" "),a("ul",[a("li",[a("p",[a("a",{attrs:{href:"https://git-scm.com/book/zh/v2/%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E7%9A%84-Git-%E5%8D%8F%E8%AE%AE",target:"_blank",rel:"noopener noreferrer"}},[s._v("服务器上的 Git - 协议"),a("OutboundLink")],1)])]),s._v(" "),a("li",[a("p",[a("a",{attrs:{href:"https://blog.csdn.net/jfkidear/article/details/90376815",target:"_blank",rel:"noopener noreferrer"}},[s._v("论git中使用https和ssh协议的区别"),a("OutboundLink")],1)])])]),s._v(" "),a("h3",{attrs:{id:"ssh协议"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ssh协议"}},[s._v("#")]),s._v(" SSH协议")]),s._v(" "),a("p",[s._v("优点：")]),s._v(" "),a("ul",[a("li",[s._v("免密登录（前提是先在本地生成 SSH 密钥对，再把公钥上传到服务器，此后用SSH协议都可以免密登录）")]),s._v(" "),a("li",[s._v("传输速度快且比较稳定")])]),s._v(" "),a("p",[s._v("缺点")]),s._v(" "),a("ul",[a("li",[s._v("必须得使用ssh密钥对，例如在一个没有SSH私钥的电脑上想要克隆一个开源仓库都不行，此时使用HTTP协议就可以")])]),s._v(" "),a("h3",{attrs:{id:"http协议"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#http协议"}},[s._v("#")]),s._v(" HTTP协议")]),s._v(" "),a("p",[s._v("优点：")]),s._v(" "),a("ul",[a("li",[s._v("方便克隆开源仓库")])]),s._v(" "),a("p",[s._v("缺点：")]),s._v(" "),a("ul",[a("li",[s._v("可能经常要输入用户名密码（我使用Bitbucket因为异地登录账号经常被锁定，必须得在web端重新输入验证码登录，体验极差）")]),s._v(" "),a("li",[s._v("克隆体积较大的仓库时连接不如SSH协议稳定")])])])}),[],!1,null,null,null);t.default=n.exports}}]);