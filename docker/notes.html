<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>bxs.ink</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="https://buxianshan.oss-cn-beijing.aliyuncs.com/favicon.ico">
    <script>var _hmt = _hmt || [];
        (function () {
            var hm = document.createElement("script");
            hm.src = "https://hm.baidu.com/hm.js?40291c62c61f1ce49b021bc0f36df71e";
            if (window.location.hostname !== "localhost") {
                var s = document.getElementsByTagName("script")[0];
                s.parentNode.insertBefore(hm, s);
            }
        })();</script>
    <meta name="description" content="一些个人理解、笔记和分享">
    
    <link rel="preload" href="/bxs-blog/assets/css/0.styles.c2cd3e4d.css" as="style"><link rel="preload" href="/bxs-blog/assets/js/app.86ae9cdb.js" as="script"><link rel="preload" href="/bxs-blog/assets/js/2.573d8f00.js" as="script"><link rel="preload" href="/bxs-blog/assets/js/35.1d8a3185.js" as="script"><link rel="prefetch" href="/bxs-blog/assets/js/10.5b9464ff.js"><link rel="prefetch" href="/bxs-blog/assets/js/11.7e7abe8e.js"><link rel="prefetch" href="/bxs-blog/assets/js/12.800bd340.js"><link rel="prefetch" href="/bxs-blog/assets/js/13.a3be438e.js"><link rel="prefetch" href="/bxs-blog/assets/js/14.205c07d0.js"><link rel="prefetch" href="/bxs-blog/assets/js/15.ef905565.js"><link rel="prefetch" href="/bxs-blog/assets/js/16.b2cff446.js"><link rel="prefetch" href="/bxs-blog/assets/js/17.af2e8b20.js"><link rel="prefetch" href="/bxs-blog/assets/js/18.1cc0f1dd.js"><link rel="prefetch" href="/bxs-blog/assets/js/19.37f7adf7.js"><link rel="prefetch" href="/bxs-blog/assets/js/20.57a60a7e.js"><link rel="prefetch" href="/bxs-blog/assets/js/21.cd9c89f5.js"><link rel="prefetch" href="/bxs-blog/assets/js/22.44c562c8.js"><link rel="prefetch" href="/bxs-blog/assets/js/23.9e9b15ef.js"><link rel="prefetch" href="/bxs-blog/assets/js/24.c050ebb3.js"><link rel="prefetch" href="/bxs-blog/assets/js/25.75e890fc.js"><link rel="prefetch" href="/bxs-blog/assets/js/26.fceee696.js"><link rel="prefetch" href="/bxs-blog/assets/js/27.4348131b.js"><link rel="prefetch" href="/bxs-blog/assets/js/28.921c8a03.js"><link rel="prefetch" href="/bxs-blog/assets/js/29.6dfecb25.js"><link rel="prefetch" href="/bxs-blog/assets/js/3.29cf0858.js"><link rel="prefetch" href="/bxs-blog/assets/js/30.ef20ff5c.js"><link rel="prefetch" href="/bxs-blog/assets/js/31.164bb780.js"><link rel="prefetch" href="/bxs-blog/assets/js/32.ca44f0e3.js"><link rel="prefetch" href="/bxs-blog/assets/js/33.dfe0f8bb.js"><link rel="prefetch" href="/bxs-blog/assets/js/34.ea7b8f74.js"><link rel="prefetch" href="/bxs-blog/assets/js/36.d7a213d2.js"><link rel="prefetch" href="/bxs-blog/assets/js/37.0af807a9.js"><link rel="prefetch" href="/bxs-blog/assets/js/38.8e1844b4.js"><link rel="prefetch" href="/bxs-blog/assets/js/39.8ee4e454.js"><link rel="prefetch" href="/bxs-blog/assets/js/4.8c40fe05.js"><link rel="prefetch" href="/bxs-blog/assets/js/40.d4b97474.js"><link rel="prefetch" href="/bxs-blog/assets/js/41.fbd946cd.js"><link rel="prefetch" href="/bxs-blog/assets/js/42.a2c1e17a.js"><link rel="prefetch" href="/bxs-blog/assets/js/43.a2766d86.js"><link rel="prefetch" href="/bxs-blog/assets/js/44.7f3a4d37.js"><link rel="prefetch" href="/bxs-blog/assets/js/45.670957f4.js"><link rel="prefetch" href="/bxs-blog/assets/js/46.5bbcd2be.js"><link rel="prefetch" href="/bxs-blog/assets/js/47.4b0f5480.js"><link rel="prefetch" href="/bxs-blog/assets/js/48.1e38cc47.js"><link rel="prefetch" href="/bxs-blog/assets/js/49.cdf6f2bc.js"><link rel="prefetch" href="/bxs-blog/assets/js/5.cf6a1023.js"><link rel="prefetch" href="/bxs-blog/assets/js/50.1acb4ecb.js"><link rel="prefetch" href="/bxs-blog/assets/js/51.4c43f577.js"><link rel="prefetch" href="/bxs-blog/assets/js/52.c3226972.js"><link rel="prefetch" href="/bxs-blog/assets/js/53.e4668dfa.js"><link rel="prefetch" href="/bxs-blog/assets/js/54.d08daa4a.js"><link rel="prefetch" href="/bxs-blog/assets/js/55.1e387a3c.js"><link rel="prefetch" href="/bxs-blog/assets/js/56.8bb1b9ce.js"><link rel="prefetch" href="/bxs-blog/assets/js/57.d911b57f.js"><link rel="prefetch" href="/bxs-blog/assets/js/58.f66f9c5a.js"><link rel="prefetch" href="/bxs-blog/assets/js/59.ca295f10.js"><link rel="prefetch" href="/bxs-blog/assets/js/6.8b21b09c.js"><link rel="prefetch" href="/bxs-blog/assets/js/60.ca986b4b.js"><link rel="prefetch" href="/bxs-blog/assets/js/61.fc985e1b.js"><link rel="prefetch" href="/bxs-blog/assets/js/62.3b6a87b7.js"><link rel="prefetch" href="/bxs-blog/assets/js/63.01362e69.js"><link rel="prefetch" href="/bxs-blog/assets/js/64.82caa3df.js"><link rel="prefetch" href="/bxs-blog/assets/js/65.1616a03c.js"><link rel="prefetch" href="/bxs-blog/assets/js/66.416ba54f.js"><link rel="prefetch" href="/bxs-blog/assets/js/67.86fa39e1.js"><link rel="prefetch" href="/bxs-blog/assets/js/7.0c43d222.js"><link rel="prefetch" href="/bxs-blog/assets/js/8.55ae731a.js"><link rel="prefetch" href="/bxs-blog/assets/js/9.9f70835a.js">
    <link rel="stylesheet" href="/bxs-blog/assets/css/0.styles.c2cd3e4d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/bxs-blog/" class="home-link router-link-active"><!----> <span class="site-name">bxs.ink</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/bxs-blog/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Python Menu" class="dropdown-title"><span class="title">Python</span> <span class="arrow down"></span></button> <button type="button" aria-label="Python Menu" class="mobile-dropdown-title"><span class="title">Python</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/bxs-blog/python/introduction.html" class="nav-link">
  简介
</a></li><li class="dropdown-item"><!----> <a href="/bxs-blog/python/snippets.html" class="nav-link">
  常用代码片段
</a></li><li class="dropdown-item"><!----> <a href="/bxs-blog/python/class.html" class="nav-link">
  Python 面向对象
</a></li><li class="dropdown-item"><!----> <a href="/bxs-blog/python/multithread.html" class="nav-link">
  Python 多线程
</a></li><li class="dropdown-item"><!----> <a href="/bxs-blog/python/console-arguments.html" class="nav-link">
  Python 命令行传参
</a></li><li class="dropdown-item"><!----> <a href="/bxs-blog/python/with.html" class="nav-link">
  with 语句
</a></li><li class="dropdown-item"><!----> <a href="/bxs-blog/python/build-package.html" class="nav-link">
  打包项目到PyPI
</a></li><li class="dropdown-item"><!----> <a href="/bxs-blog/python/pyc.html" class="nav-link">
  pyc文件
</a></li><li class="dropdown-item"><!----> <a href="/bxs-blog/python/name-style.html" class="nav-link">
  命名风格建议
</a></li><li class="dropdown-item"><!----> <a href="/bxs-blog/python/pycharm-generate-doc-string.html" class="nav-link">
  Pycharm 生成文档字符串
</a></li><li class="dropdown-item"><!----> <a href="/bxs-blog/python/zen.html" class="nav-link">
  The Zen of Python
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java Menu" class="dropdown-title"><span class="title">Java</span> <span class="arrow down"></span></button> <button type="button" aria-label="Java Menu" class="mobile-dropdown-title"><span class="title">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/bxs-blog/java/basic.html" class="nav-link">
  Java基础
</a></li><li class="dropdown-item"><!----> <a href="/bxs-blog/java/jvm.html" class="nav-link">
  JVM
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Design Patterns Menu" class="dropdown-title"><span class="title">设计模式</span> <span class="arrow down"></span></button> <button type="button" aria-label="Design Patterns Menu" class="mobile-dropdown-title"><span class="title">设计模式</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/bxs-blog/design-patterns/introduction.html" class="nav-link">
  简介
</a></li><li class="dropdown-item"><!----> <a href="/bxs-blog/design-patterns/singleton.html" class="nav-link">
  单例模式
</a></li><li class="dropdown-item"><!----> <a href="/bxs-blog/design-patterns/visitor.html" class="nav-link">
  访问者模式
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Linux Menu" class="dropdown-title"><span class="title">Linux</span> <span class="arrow down"></span></button> <button type="button" aria-label="Linux Menu" class="mobile-dropdown-title"><span class="title">Linux</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/bxs-blog/linux/commands-log.html" class="nav-link">
  常用命令记录
</a></li><li class="dropdown-item"><!----> <a href="/bxs-blog/linux/custom-commands.html" class="nav-link">
  重写/自定义命令
</a></li><li class="dropdown-item"><!----> <a href="/bxs-blog/linux/shell.html" class="nav-link">
  Shell类型
</a></li><li class="dropdown-item"><!----> <a href="/bxs-blog/linux/esxi.html" class="nav-link">
  ESXi
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Front-end Menu" class="dropdown-title"><span class="title">前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="Front-end Menu" class="mobile-dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/bxs-blog/front-end/html.html" class="nav-link">
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/bxs-blog/front-end/css.html" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/bxs-blog/front-end/js.html" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/bxs-blog/front-end/nodejs.html" class="nav-link">
  Node.js
</a></li><li class="dropdown-item"><!----> <a href="/bxs-blog/front-end/ajax.html" class="nav-link">
  AJAX
</a></li><li class="dropdown-item"><!----> <a href="/bxs-blog/front-end/experience.html" class="nav-link">
  问题记录
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Docker" class="dropdown-title"><span class="title">Docker</span> <span class="arrow down"></span></button> <button type="button" aria-label="Docker" class="mobile-dropdown-title"><span class="title">Docker</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/bxs-blog/docker/notes.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  基础笔记
</a></li><li class="dropdown-item"><!----> <a href="/bxs-blog/docker/experience.html" class="nav-link">
  问题记录
</a></li><li class="dropdown-item"><!----> <a href="/bxs-blog/docker/docker-compose.html" class="nav-link">
  docker-compose
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Debug" class="dropdown-title"><span class="title">Debug</span> <span class="arrow down"></span></button> <button type="button" aria-label="Debug" class="mobile-dropdown-title"><span class="title">Debug</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/bxs-blog/debug/dll-load-failed-while-importing-cv2.html" class="nav-link">
  DLL load failed while importing cv2
</a></li><li class="dropdown-item"><!----> <a href="/bxs-blog/debug/linux-java-environment-variables.html" class="nav-link">
  linux服务器java环境变量问题
</a></li><li class="dropdown-item"><!----> <a href="/bxs-blog/debug/port-already-in-use.html" class="nav-link">
  端口被占用
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Tools Menu" class="dropdown-title"><span class="title">工具</span> <span class="arrow down"></span></button> <button type="button" aria-label="Tools Menu" class="mobile-dropdown-title"><span class="title">工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/bxs-blog/tools/tools-i-use.html" class="nav-link">
  常用工具
</a></li><li class="dropdown-item"><!----> <a href="/bxs-blog/tools/git.html" class="nav-link">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/bxs-blog/tools/sourcetree.html" class="nav-link">
  Sourcetree
</a></li><li class="dropdown-item"><!----> <a href="/bxs-blog/tools/typora.html" class="nav-link">
  Typora
</a></li><li class="dropdown-item"><!----> <a href="/bxs-blog/tools/microsoft-rdp.html" class="nav-link">
  微软RDP优化
</a></li><li class="dropdown-item"><!----> <a href="https://icon.bxs.ink/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Get Website Icon
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="/bxs-blog/tools/time.html" class="nav-link">
  时间
</a></li></ul></div></div><div class="nav-item"><a href="/bxs-blog/blog/" class="nav-link">
  Blog
</a></div><div class="nav-item"><a href="/bxs-blog/collections/" class="nav-link">
  收藏
</a></div><div class="nav-item"><a href="/bxs-blog/about/" class="nav-link">
  关于
</a></div> <a href="https://github.com/buxianshan/bxs-blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    查看源码
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/bxs-blog/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Python Menu" class="dropdown-title"><span class="title">Python</span> <span class="arrow down"></span></button> <button type="button" aria-label="Python Menu" class="mobile-dropdown-title"><span class="title">Python</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/bxs-blog/python/introduction.html" class="nav-link">
  简介
</a></li><li class="dropdown-item"><!----> <a href="/bxs-blog/python/snippets.html" class="nav-link">
  常用代码片段
</a></li><li class="dropdown-item"><!----> <a href="/bxs-blog/python/class.html" class="nav-link">
  Python 面向对象
</a></li><li class="dropdown-item"><!----> <a href="/bxs-blog/python/multithread.html" class="nav-link">
  Python 多线程
</a></li><li class="dropdown-item"><!----> <a href="/bxs-blog/python/console-arguments.html" class="nav-link">
  Python 命令行传参
</a></li><li class="dropdown-item"><!----> <a href="/bxs-blog/python/with.html" class="nav-link">
  with 语句
</a></li><li class="dropdown-item"><!----> <a href="/bxs-blog/python/build-package.html" class="nav-link">
  打包项目到PyPI
</a></li><li class="dropdown-item"><!----> <a href="/bxs-blog/python/pyc.html" class="nav-link">
  pyc文件
</a></li><li class="dropdown-item"><!----> <a href="/bxs-blog/python/name-style.html" class="nav-link">
  命名风格建议
</a></li><li class="dropdown-item"><!----> <a href="/bxs-blog/python/pycharm-generate-doc-string.html" class="nav-link">
  Pycharm 生成文档字符串
</a></li><li class="dropdown-item"><!----> <a href="/bxs-blog/python/zen.html" class="nav-link">
  The Zen of Python
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java Menu" class="dropdown-title"><span class="title">Java</span> <span class="arrow down"></span></button> <button type="button" aria-label="Java Menu" class="mobile-dropdown-title"><span class="title">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/bxs-blog/java/basic.html" class="nav-link">
  Java基础
</a></li><li class="dropdown-item"><!----> <a href="/bxs-blog/java/jvm.html" class="nav-link">
  JVM
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Design Patterns Menu" class="dropdown-title"><span class="title">设计模式</span> <span class="arrow down"></span></button> <button type="button" aria-label="Design Patterns Menu" class="mobile-dropdown-title"><span class="title">设计模式</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/bxs-blog/design-patterns/introduction.html" class="nav-link">
  简介
</a></li><li class="dropdown-item"><!----> <a href="/bxs-blog/design-patterns/singleton.html" class="nav-link">
  单例模式
</a></li><li class="dropdown-item"><!----> <a href="/bxs-blog/design-patterns/visitor.html" class="nav-link">
  访问者模式
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Linux Menu" class="dropdown-title"><span class="title">Linux</span> <span class="arrow down"></span></button> <button type="button" aria-label="Linux Menu" class="mobile-dropdown-title"><span class="title">Linux</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/bxs-blog/linux/commands-log.html" class="nav-link">
  常用命令记录
</a></li><li class="dropdown-item"><!----> <a href="/bxs-blog/linux/custom-commands.html" class="nav-link">
  重写/自定义命令
</a></li><li class="dropdown-item"><!----> <a href="/bxs-blog/linux/shell.html" class="nav-link">
  Shell类型
</a></li><li class="dropdown-item"><!----> <a href="/bxs-blog/linux/esxi.html" class="nav-link">
  ESXi
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Front-end Menu" class="dropdown-title"><span class="title">前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="Front-end Menu" class="mobile-dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/bxs-blog/front-end/html.html" class="nav-link">
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/bxs-blog/front-end/css.html" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/bxs-blog/front-end/js.html" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/bxs-blog/front-end/nodejs.html" class="nav-link">
  Node.js
</a></li><li class="dropdown-item"><!----> <a href="/bxs-blog/front-end/ajax.html" class="nav-link">
  AJAX
</a></li><li class="dropdown-item"><!----> <a href="/bxs-blog/front-end/experience.html" class="nav-link">
  问题记录
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Docker" class="dropdown-title"><span class="title">Docker</span> <span class="arrow down"></span></button> <button type="button" aria-label="Docker" class="mobile-dropdown-title"><span class="title">Docker</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/bxs-blog/docker/notes.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  基础笔记
</a></li><li class="dropdown-item"><!----> <a href="/bxs-blog/docker/experience.html" class="nav-link">
  问题记录
</a></li><li class="dropdown-item"><!----> <a href="/bxs-blog/docker/docker-compose.html" class="nav-link">
  docker-compose
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Debug" class="dropdown-title"><span class="title">Debug</span> <span class="arrow down"></span></button> <button type="button" aria-label="Debug" class="mobile-dropdown-title"><span class="title">Debug</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/bxs-blog/debug/dll-load-failed-while-importing-cv2.html" class="nav-link">
  DLL load failed while importing cv2
</a></li><li class="dropdown-item"><!----> <a href="/bxs-blog/debug/linux-java-environment-variables.html" class="nav-link">
  linux服务器java环境变量问题
</a></li><li class="dropdown-item"><!----> <a href="/bxs-blog/debug/port-already-in-use.html" class="nav-link">
  端口被占用
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Tools Menu" class="dropdown-title"><span class="title">工具</span> <span class="arrow down"></span></button> <button type="button" aria-label="Tools Menu" class="mobile-dropdown-title"><span class="title">工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/bxs-blog/tools/tools-i-use.html" class="nav-link">
  常用工具
</a></li><li class="dropdown-item"><!----> <a href="/bxs-blog/tools/git.html" class="nav-link">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/bxs-blog/tools/sourcetree.html" class="nav-link">
  Sourcetree
</a></li><li class="dropdown-item"><!----> <a href="/bxs-blog/tools/typora.html" class="nav-link">
  Typora
</a></li><li class="dropdown-item"><!----> <a href="/bxs-blog/tools/microsoft-rdp.html" class="nav-link">
  微软RDP优化
</a></li><li class="dropdown-item"><!----> <a href="https://icon.bxs.ink/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Get Website Icon
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="/bxs-blog/tools/time.html" class="nav-link">
  时间
</a></li></ul></div></div><div class="nav-item"><a href="/bxs-blog/blog/" class="nav-link">
  Blog
</a></div><div class="nav-item"><a href="/bxs-blog/collections/" class="nav-link">
  收藏
</a></div><div class="nav-item"><a href="/bxs-blog/about/" class="nav-link">
  关于
</a></div> <a href="https://github.com/buxianshan/bxs-blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    查看源码
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/bxs-blog/docker/notes.html" aria-current="page" class="active sidebar-link">基础笔记</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/bxs-blog/docker/notes.html#简介" class="sidebar-link">简介</a></li><li class="sidebar-sub-header"><a href="/bxs-blog/docker/notes.html#安装docker" class="sidebar-link">安装Docker</a></li><li class="sidebar-sub-header"><a href="/bxs-blog/docker/notes.html#卸载docker" class="sidebar-link">卸载Docker</a></li><li class="sidebar-sub-header"><a href="/bxs-blog/docker/notes.html#配置阿里云镜像" class="sidebar-link">配置阿里云镜像</a></li><li class="sidebar-sub-header"><a href="/bxs-blog/docker/notes.html#查看版本、系统信息、帮助文档" class="sidebar-link">查看版本、系统信息、帮助文档</a></li><li class="sidebar-sub-header"><a href="/bxs-blog/docker/notes.html#镜像的基本命令" class="sidebar-link">镜像的基本命令</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/bxs-blog/docker/notes.html#docke-images" class="sidebar-link">docke images</a></li><li class="sidebar-sub-header"><a href="/bxs-blog/docker/notes.html#docker-search" class="sidebar-link">docker search</a></li><li class="sidebar-sub-header"><a href="/bxs-blog/docker/notes.html#docker-pull" class="sidebar-link">docker pull</a></li><li class="sidebar-sub-header"><a href="/bxs-blog/docker/notes.html#docker-rmi" class="sidebar-link">docker rmi</a></li></ul></li><li class="sidebar-sub-header"><a href="/bxs-blog/docker/notes.html#容器的基本命令" class="sidebar-link">容器的基本命令</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/bxs-blog/docker/notes.html#docker-run" class="sidebar-link">docker run</a></li><li class="sidebar-sub-header"><a href="/bxs-blog/docker/notes.html#docker-ps" class="sidebar-link">docker ps</a></li><li class="sidebar-sub-header"><a href="/bxs-blog/docker/notes.html#docker-rm" class="sidebar-link">docker rm</a></li><li class="sidebar-sub-header"><a href="/bxs-blog/docker/notes.html#启动-停止容器" class="sidebar-link">启动/停止容器</a></li><li class="sidebar-sub-header"><a href="/bxs-blog/docker/notes.html#docker-stats" class="sidebar-link">docker stats</a></li></ul></li><li class="sidebar-sub-header"><a href="/bxs-blog/docker/notes.html#常用命令" class="sidebar-link">常用命令</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/bxs-blog/docker/notes.html#后台启动容器" class="sidebar-link">后台启动容器</a></li><li class="sidebar-sub-header"><a href="/bxs-blog/docker/notes.html#进入正在运行的容器" class="sidebar-link">进入正在运行的容器</a></li><li class="sidebar-sub-header"><a href="/bxs-blog/docker/notes.html#设置容器开机自启" class="sidebar-link">设置容器开机自启</a></li><li class="sidebar-sub-header"><a href="/bxs-blog/docker/notes.html#查看某个容器的日志" class="sidebar-link">查看某个容器的日志</a></li><li class="sidebar-sub-header"><a href="/bxs-blog/docker/notes.html#查看容器中的进程信息" class="sidebar-link">查看容器中的进程信息</a></li><li class="sidebar-sub-header"><a href="/bxs-blog/docker/notes.html#查看镜像-容器元数据" class="sidebar-link">查看镜像/容器元数据</a></li><li class="sidebar-sub-header"><a href="/bxs-blog/docker/notes.html#容器内外复制文件" class="sidebar-link">容器内外复制文件</a></li><li class="sidebar-sub-header"><a href="/bxs-blog/docker/notes.html#修改容器名" class="sidebar-link">修改容器名</a></li></ul></li><li class="sidebar-sub-header"><a href="/bxs-blog/docker/notes.html#容器数据卷" class="sidebar-link">容器数据卷</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/bxs-blog/docker/notes.html#指定路径挂载" class="sidebar-link">指定路径挂载</a></li><li class="sidebar-sub-header"><a href="/bxs-blog/docker/notes.html#具名和匿名挂载" class="sidebar-link">具名和匿名挂载</a></li></ul></li><li class="sidebar-sub-header"><a href="/bxs-blog/docker/notes.html#dockerfile" class="sidebar-link">Dockerfile</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/bxs-blog/docker/notes.html#dockerfile基础命令" class="sidebar-link">DockerFile基础命令</a></li><li class="sidebar-sub-header"><a href="/bxs-blog/docker/notes.html#构建一个自己的centos镜像" class="sidebar-link">构建一个自己的centos镜像</a></li><li class="sidebar-sub-header"><a href="/bxs-blog/docker/notes.html#docker-history" class="sidebar-link">docker history</a></li></ul></li></ul></li><li><a href="/bxs-blog/docker/experience.html" class="sidebar-link">问题记录</a></li><li><a href="/bxs-blog/docker/docker-compose.html" class="sidebar-link">docker-compose</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 align="center">Docker</h1> <h2 id="简介"><a href="#简介" class="header-anchor">#</a> 简介</h2> <p>关于什么是Docker这里不做赘述，下面是我的学习过程：</p> <ul><li>Bilibili视频：<a href="https://www.bilibili.com/video/BV1og4y1q7M4" target="_blank" rel="noopener noreferrer">Docker通俗易懂教程<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://docs.docker.com/" target="_blank" rel="noopener noreferrer">Docker官方文档<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>动手实践</li></ul> <h2 id="安装docker"><a href="#安装docker" class="header-anchor">#</a> 安装Docker</h2> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 1、卸载旧版本</span>
<span class="token function">sudo</span> yum remove <span class="token function">docker</span> <span class="token punctuation">\</span>
                  docker-client <span class="token punctuation">\</span>
                  docker-client-latest <span class="token punctuation">\</span>
                  docker-common <span class="token punctuation">\</span>
                  docker-latest <span class="token punctuation">\</span>
                  docker-latest-logrotate <span class="token punctuation">\</span>
                  docker-logrotate <span class="token punctuation">\</span>
                  docker-engine

<span class="token comment"># 2、安装需要的工具</span>
<span class="token function">sudo</span> yum <span class="token function">install</span> -y yum-utils

<span class="token comment"># 3、设置镜像的仓库(换成阿里云的)</span>
<span class="token function">sudo</span> yum-config-manager <span class="token punctuation">\</span>
    --add-repo <span class="token punctuation">\</span>
    http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo

<span class="token comment"># 4、安装docker(ce社区版、ee企业版)</span>
<span class="token comment"># 先更新一下yum的索引</span>
yum makecache fast
<span class="token function">sudo</span> yum <span class="token function">install</span> docker-ce docker-ce-cli containerd.io

<span class="token comment"># 5、启动docker服务</span>
<span class="token function">sudo</span> systemctl start <span class="token function">docker</span>
<span class="token comment"># docker version 可以看到docker server和client版本</span>

<span class="token comment"># 6、测试运行hello-world</span>
<span class="token function">docker</span> run hello-world

<span class="token comment"># 7、查看一下刚下载的hello-world镜像</span>
<span class="token function">docker</span> images
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><h2 id="卸载docker"><a href="#卸载docker" class="header-anchor">#</a> 卸载Docker</h2> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 1、卸载docker依赖</span>
<span class="token function">sudo</span> yum remove docker-ce docker-ce-cli containerd.io
<span class="token comment"># 2、删除目录</span>
<span class="token function">sudo</span> <span class="token function">rm</span> -rf /var/lib/docker
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="配置阿里云镜像"><a href="#配置阿里云镜像" class="header-anchor">#</a> 配置阿里云镜像</h2> <p><a href="https://help.aliyun.com/document_detail/60750.html" target="_blank" rel="noopener noreferrer">阿里云的解释<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>：使用Docker时需要首先下载一个官方镜像，例如<code>mysql</code>、<code>wordpress</code>。然而由于网络原因，下载一个Docker官方镜像可能会需要很长的时间，甚至下载失败。为此，阿里云容器镜像服务ACR提供了官方的镜像站点，从而加速官方镜像的下载。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">mkdir</span> -p /etc/docker
<span class="token comment"># 下方的地址是我在阿里云免费申请的，当然你也可以自己申请一个</span>
<span class="token function">sudo</span> <span class="token function">tee</span> /etc/docker/daemon.json <span class="token operator">&lt;&lt;-</span><span class="token string">'EOF'
{
  &quot;registry-mirrors&quot;: [&quot;https://r9g24uys.mirror.aliyuncs.com&quot;]
}
EOF</span>
<span class="token function">sudo</span> systemctl daemon-reload
<span class="token function">sudo</span> systemctl restart <span class="token function">docker</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="查看版本、系统信息、帮助文档"><a href="#查看版本、系统信息、帮助文档" class="header-anchor">#</a> 查看版本、系统信息、帮助文档</h2> <p>帮助文档：https://docs.docker.com/reference/</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> version
<span class="token comment"># 显示docker系统信息，镜像、容器数量、运行状态等</span>
<span class="token function">docker</span> info
<span class="token function">docker</span> <span class="token punctuation">[</span>command<span class="token punctuation">]</span> --help
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="镜像的基本命令"><a href="#镜像的基本命令" class="header-anchor">#</a> 镜像的基本命令</h2> <h3 id="docke-images"><a href="#docke-images" class="header-anchor">#</a> docke images</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 显示本地所有镜像信息</span>
<span class="token function">docker</span> images
    -a, --all    <span class="token comment"># 列出所有镜像</span>
    -q, --quiet  <span class="token comment"># 只显示镜像的id</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="docker-search"><a href="#docker-search" class="header-anchor">#</a> docker search</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 搜索镜像（等于从docker hub上搜索）</span>
<span class="token function">docker</span> search mysql
	--filter<span class="token operator">=</span>STARS<span class="token operator">=</span><span class="token number">3000</span> <span class="token comment"># 过滤出收藏超过3000的镜像</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="docker-pull"><a href="#docker-pull" class="header-anchor">#</a> docker pull</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 拉取镜像</span>
<span class="token comment"># docker pull mysql[:tag]</span>

<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># docker pull mysql</span>
Using default tag: latest <span class="token comment"># 如果不写tag，默认是latest</span>
latest: Pulling from library/mysql
d121f8d1c412: Pull complete <span class="token comment"># 分层下载</span>
f3cebc0b4691: Pull complete 
1862755a0b37: Pull complete 
489b44f3dbb4: Pull complete 
690874f836db: Pull complete 
baa8be383ffb: Pull complete 
55356608b4ac: Pull complete 
dd35ceccb6eb: Pull complete 
429b35712b19: Pull complete 
162d8291095c: Pull complete 
5e500ef7181b: Pull complete 
af7528e958b6: Pull complete 
Digest: sha256:e1bfe11693ed2052cb3b4e5fa356c65381129e87e38551c6cd6ec532ebe0e808 <span class="token comment"># 签名</span>
Status: Downloaded newer image <span class="token keyword">for</span> mysql:latest
docker.io/library/mysql:latest	<span class="token comment"># 真实地址</span>

<span class="token comment"># 等价于下面</span>
<span class="token function">docker</span> pull docker.io/library/mysql:latest

<span class="token comment"># 指定镜像版本</span>
<span class="token function">docker</span> pull mysql:5.7
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><h3 id="docker-rmi"><a href="#docker-rmi" class="header-anchor">#</a> docker rmi</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 删除镜像</span>
<span class="token function">docker</span> rmi -f image_id1 image_id2 <span class="token comment"># 可以多个id</span>

<span class="token comment"># 删除所有镜像</span>
<span class="token function">docker</span> rmi -f <span class="token variable"><span class="token variable">$(</span><span class="token function">docker</span> images -aq<span class="token variable">)</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="容器的基本命令"><a href="#容器的基本命令" class="header-anchor">#</a> 容器的基本命令</h2> <p>有了镜像才能创建容器，如果本地没有镜像，docker会先尝试在Docker Hub上下载镜像。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 下载一个centos的镜像</span>
<span class="token function">docker</span> pull centos
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="docker-run"><a href="#docker-run" class="header-anchor">#</a> docker run</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 创建容器并运行</span>
<span class="token function">docker</span> run <span class="token punctuation">[</span>可选参数<span class="token punctuation">]</span> image
<span class="token comment"># 常用参数</span>
	--name<span class="token operator">=</span><span class="token string">&quot;Name&quot;</span>	<span class="token comment"># 容器名字(命名)</span>
	-d              <span class="token comment"># 以后台方式运行</span>
	-it             <span class="token comment"># 使用交互方式运行，进入容器查看内容</span>
	-p <span class="token number">8080</span>:8080    <span class="token comment"># 指定容器的端口(可以映射主机端口)</span>
		-p ip:主机端口：容器端口
		-p 主机端口:容器端口 <span class="token punctuation">(</span>常用<span class="token punctuation">)</span>
		-p 容器端口
		容器端口
	-P              <span class="token comment"># 随机指定端口</span>

<span class="token comment"># 新建并启动容器</span>
<span class="token function">docker</span> run -it centos /bin/bash
<span class="token comment"># 直接停止容器并退出(因为没有-d设置以后台方式运行)</span>
<span class="token builtin class-name">exit</span>
<span class="token comment"># 退出容器(不停止容器)</span>
Ctrl + P + Q
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h3 id="docker-ps"><a href="#docker-ps" class="header-anchor">#</a> docker ps</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 查看运行中的容器</span>
<span class="token function">docker</span> <span class="token function">ps</span>
	-a	            <span class="token comment"># 查看所有运行过的容器</span>
	-q              <span class="token comment"># 只显示容器的编号</span>
	-n<span class="token operator">=</span>number       <span class="token comment"># 显示最近创建的n个容器</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="docker-rm"><a href="#docker-rm" class="header-anchor">#</a> docker rm</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> <span class="token function">rm</span> 容器id                     <span class="token comment"># 删除容器(运行中的容器要-f才能删除)</span>
<span class="token function">docker</span> <span class="token function">rm</span> -f <span class="token variable"><span class="token variable">$(</span><span class="token function">docker</span> <span class="token function">ps</span> -aq<span class="token variable">)</span></span>       <span class="token comment"># 删除所有容器</span>
<span class="token function">docker</span> <span class="token function">ps</span> -a -f -q<span class="token operator">|</span><span class="token function">xargs</span> <span class="token function">docker</span> <span class="token function">rm</span>  <span class="token comment"># 删除所有容器</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="启动-停止容器"><a href="#启动-停止容器" class="header-anchor">#</a> 启动/停止容器</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> start 容器id
<span class="token function">docker</span> stop 容器id
<span class="token function">docker</span> restart 容器id
<span class="token function">docker</span> <span class="token function">kill</span> 容器id      <span class="token comment"># 强制停止运行容器</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="docker-stats"><a href="#docker-stats" class="header-anchor">#</a> docker stats</h3> <p>显示容器使用的系统资源</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 默认情况下，stats 命令会每隔1秒刷新一次输出的内容直到你按下 ctrl + c</span>
<span class="token function">docker</span> stats
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="常用命令"><a href="#常用命令" class="header-anchor">#</a> 常用命令</h2> <h3 id="后台启动容器"><a href="#后台启动容器" class="header-anchor">#</a> 后台启动容器</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># docker run -d 镜像名</span>
<span class="token function">docker</span> run -d centos
<span class="token comment"># 这样运行centos后发现这个容器停止了，因为容器内没有正在运行的进程就会自动停止</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="进入正在运行的容器"><a href="#进入正在运行的容器" class="header-anchor">#</a> 进入正在运行的容器</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 方法1：进入容器开启一个新的终端(容器内需要有/bin/bash这个解释器，或者改成其它解释器)</span>
<span class="token function">docker</span> <span class="token builtin class-name">exec</span> -it 容器id /bin/bash
<span class="token comment"># 退出容器</span>
<span class="token builtin class-name">exit</span>

<span class="token comment"># 方法2：进入容器正在运行的终端</span>
<span class="token function">docker</span> attach 容器id
<span class="token comment"># 注意attach进入的容器，如果Ctrl+C退出会直接把容器给停止了</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="设置容器开机自启"><a href="#设置容器开机自启" class="header-anchor">#</a> 设置容器开机自启</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> update --restart<span class="token operator">=</span>always 容器名
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="查看某个容器的日志"><a href="#查看某个容器的日志" class="header-anchor">#</a> 查看某个容器的日志</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> logs -tf --tail <span class="token number">10</span> 容器名	<span class="token comment"># 实时刷新，显示最后10行</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="查看容器中的进程信息"><a href="#查看容器中的进程信息" class="header-anchor">#</a> 查看容器中的进程信息</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> <span class="token function">top</span> 容器名
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="查看镜像-容器元数据"><a href="#查看镜像-容器元数据" class="header-anchor">#</a> 查看镜像/容器元数据</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> inspect 镜像名或容器名
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="容器内外复制文件"><a href="#容器内外复制文件" class="header-anchor">#</a> 容器内外复制文件</h3> <p>只要容器存在就可以进行文件复制，不需要容器正在运行中。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 容器内复制到容器外</span>
<span class="token function">docker</span> <span class="token function">cp</span> 容器id:容器内路径 宿主机路径

<span class="token comment"># 容器外复制到容器内</span>
<span class="token function">docker</span> <span class="token function">cp</span> 宿主机路径 容器id:容器内路径 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="修改容器名"><a href="#修改容器名" class="header-anchor">#</a> 修改容器名</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>docke <span class="token function">rename</span> old_name new_name
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="容器数据卷"><a href="#容器数据卷" class="header-anchor">#</a> 容器数据卷</h2> <p>将容器内的目录挂载到主机（或者叫映射），容器间也可以数据共享。</p> <h3 id="指定路径挂载"><a href="#指定路径挂载" class="header-anchor">#</a> 指定路径挂载</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 创建容器时使用参数-v挂载</span>
<span class="token function">docker</span> run -it -v 主机目录:容器目录 镜像
<span class="token comment"># 可以在容器元数据看到挂载的具体信息</span>
<span class="token function">docker</span> inspect 容器名
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="具名和匿名挂载"><a href="#具名和匿名挂载" class="header-anchor">#</a> 具名和匿名挂载</h3> <p>简单地说具名挂载就是指定数据卷名，匿名挂载就是不指定数据卷名（自动生成一串名字）。建议用具名挂载。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 创建一个nginx容器，匿名挂载/etc/nginx目录。-P是随机映射端口</span>
<span class="token function">docker</span> run -d -P --name nginx001 -v /etc/nginx nginx

<span class="token comment"># 创建一个nginx容器，具名挂载/etc/nginx到数据卷名为nginx001_volume</span>
<span class="token function">docker</span> run -d -P --name nginx002 -v nginx002_volume:/etc/nginx nginx

<span class="token comment"># 查看所有数据卷</span>
<span class="token punctuation">[</span>root@shanghai_0 ~<span class="token punctuation">]</span><span class="token comment"># docker volume ls</span>
DRIVER              VOLUME NAME
<span class="token builtin class-name">local</span>               9bdd94a6384879da13f6051c3e79327d3d3d7a2e04587efd37691db9d1bbc57b
<span class="token builtin class-name">local</span>               nginx002_volume
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>使用docker inspect 容器id 可以查看到具体挂载的信息</p> <p><img src="https://buxianshan.oss-cn-beijing.aliyuncs.com/Typora_images/image-20201009224819467.png" alt="image-20201009224819467"></p> <p>docker数据卷默认都在/var/lib/docker/volumes/下</p> <div class="custom-block warning"><p class="custom-block-title">注意</p> <p>注意具名和匿名挂载都是不指定容器外路径的，指定路径的叫指定路径挂载。</p></div> <p>挂载时在容器内路径后可以加<code>:rw</code>或<code>:ro</code></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 通过-v 容器内路径:ro或rw 设置读写权限。如果是ro，则在容器内就不能修改该路径下的文件（只能在容器外修改）</span>
<span class="token function">docker</span> run -d -P --name nginx002 -v nginx002_volume:/etc/nginx:ro nginx
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="dockerfile"><a href="#dockerfile" class="header-anchor">#</a> Dockerfile</h2> <p>用来构建docker镜像的文件。通过这个脚本生成镜像，镜像是一层一层的，脚本的一个个命令，每个命令都是一层。</p> <p>构建步骤：</p> <ol><li>编写docker file 文件</li> <li>docker build 构建为一个镜像</li> <li>docker run 运行镜像</li> <li>docker push 发布镜像（DockerHub、阿里云镜仓库）</li></ol> <p>一般官方发布的镜像都有链接到github的dockerfile，官方镜像一般都是最精简的。</p> <h3 id="dockerfile基础命令"><a href="#dockerfile基础命令" class="header-anchor">#</a> DockerFile基础命令</h3> <ul><li>每个关键字（命令）都必须大写</li> <li>从上到下顺序执行</li> <li>#表示注释</li> <li>每一个指令都会提交一个新的镜像层，并提交</li></ul> <p><img src="https://buxianshan.oss-cn-beijing.aliyuncs.com/Typora_images/image-20201022002708416.png" alt="image-20201022002708416"></p> <div class="language-dockerfile line-numbers-mode"><pre class="language-dockerfile"><code><span class="token instruction"><span class="token keyword">FROM</span>					# 基础镜像</span>
<span class="token instruction"><span class="token keyword">MAINTAINER</span>				# 作者（维护者），姓名+邮箱</span>
<span class="token instruction"><span class="token keyword">RUN</span>						# 构建镜像时需要运行的命令</span>
<span class="token instruction"><span class="token keyword">ADD</span>						# 添加文件（比如tomcat压缩包）</span>
<span class="token instruction"><span class="token keyword">WORKDIR</span>					# 镜像的工作目录</span>
<span class="token instruction"><span class="token keyword">VOLUME</span>					# 设置卷，挂载目录</span>
<span class="token instruction"><span class="token keyword">EXPOSE</span>					# 指定开放的端口</span>
<span class="token instruction"><span class="token keyword">RUN</span>						# 构建镜像时需要运行的命令</span>
<span class="token instruction"><span class="token keyword">CMD</span>						# 指定容器启动时要运行的命令，只有最后一个会生效，可被替代</span>
<span class="token instruction"><span class="token keyword">ENTRYPOINT</span>				# 指定容器启动时要运行的命令，可以追加命令</span>
<span class="token instruction"><span class="token keyword">ONBUILD</span>					# 当构建一个被继承 DockerFile ，就会触发这个指令</span>
<span class="token instruction"><span class="token keyword">COPY</span>					# 类似ADD，把文件复制到镜像中</span>
<span class="token instruction"><span class="token keyword">ENV</span>						# 构建时设置环境遍历</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="构建一个自己的centos镜像"><a href="#构建一个自己的centos镜像" class="header-anchor">#</a> 构建一个自己的centos镜像</h3> <p>只是安装了vim和net-tools。</p> <p>dockerfile：</p> <div class="language-dockerfile line-numbers-mode"><pre class="language-dockerfile"><code><span class="token instruction"><span class="token keyword">FROM</span> centos</span>
<span class="token instruction"><span class="token keyword">MAINTAINER</span> buxianshan&lt;buxianshan@gmail.com&gt;</span>

<span class="token instruction"><span class="token keyword">ENV</span> MYPATH /usr/local</span>
<span class="token instruction"><span class="token keyword">WORKDIR</span> <span class="token variable">$MYPATH</span></span>

<span class="token instruction"><span class="token keyword">RUN</span> yum install -y vim</span>
<span class="token instruction"><span class="token keyword">RUN</span> yum install -y net-tools</span>

<span class="token instruction"><span class="token keyword">EXPOSE</span> 80</span>

<span class="token instruction"><span class="token keyword">CMD</span> echo <span class="token variable">$MYPATH</span></span>
<span class="token instruction"><span class="token keyword">CMD</span> echo <span class="token string">&quot;------END------&quot;</span></span>
<span class="token instruction"><span class="token keyword">CMD</span> /bin/bash</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>build：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># .代表当前目录</span>
<span class="token function">docker</span> build -f dockerfile-centos -t mycentos:0.1 <span class="token builtin class-name">.</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="docker-history"><a href="#docker-history" class="header-anchor">#</a> docker history</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 可以用这个命令研究某个镜像是怎么做的</span>
<span class="token function">docker</span> <span class="token function">history</span> 镜像
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/buxianshan/bxs-blog/edit/master/docs/docker/notes.md" target="_blank" rel="noopener noreferrer">在 GitHub 上编辑此页</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">2022-04-13 15:46:41</span></div></footer> <!----> </main></div><div class="global-ui"><!----></div></div>
    <script src="/bxs-blog/assets/js/app.86ae9cdb.js" defer></script><script src="/bxs-blog/assets/js/2.573d8f00.js" defer></script><script src="/bxs-blog/assets/js/35.1d8a3185.js" defer></script>
  </body>
</html>
